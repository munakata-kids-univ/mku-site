---
import BaseLayout from "../../layouts/BaseLayout.astro";
import HeroSection from "../../components/HeroSection.astro";
import Breadcrumb from "../../components/Breadcrumb.astro";
import ContentSectionHeader from "../../components/ContentSectionHeader.astro";

const breadcrumbItems = [
  { href: "/", label: "ホーム" },
  { label: "当選者発表" }
];
---

<BaseLayout title="当選者発表" description="むなかた子ども大学各講座の当選結果を掲載するページです。令和7年度メインキャンパスや特設講座にお申し込みいただいた皆さまの当選番号を一覧でご確認いただけます。">
  <main>
    <HeroSection 
      title="当選者発表"
      subtitle="Results"
      customBackgroundStyle="hero--results"
      showImage={false}
    />

    <Breadcrumb items={breadcrumbItems} />

    <!-- Introduction Section -->
    <section class="introduction">
      <div class="introduction__container">
        <p class="introduction__text">
          こちらは「むなかた子ども大学」各講座の当選結果を掲載するページです。<br>
          令和7年度メインキャンパスや特設講座にお申し込みいただいた皆さまの当選番号を一覧でご確認いただけます。<br>
          お手持ちの応募番号と照合のうえ、参加手続きの詳細をお進めください。
        </p>
      </div>
    </section>

    <!-- Navigation Links -->
    <section class="page-nav">
      <div class="page-nav__container">
        <nav class="page-nav__menu">
          <a href="#main-campus" class="page-nav__link">
            <div class="page-nav__arrow"></div>
            <span class="page-nav__text">メインキャンパス</span>
          </a>
          <a href="#special-course" class="page-nav__link">
            <div class="page-nav__arrow"></div>
            <span class="page-nav__text">特設講座</span>
          </a>
        </nav>
      </div>
    </section>

    <!-- メインキャンパス Section -->
    <section id="main-campus" class="content-section">
      <div class="content-section__container">
        <ContentSectionHeader 
          englishTitle=""
          title="メインキャンパス"
          class="fade-up"
        />
        
        <div class="results-content">
          <!-- 内容は後ほど追加予定 -->
          <p class="results-placeholder">当選結果の内容をこちらに掲載予定です。</p>
        </div>
      </div>
    </section>

    <!-- 特設講座 Section -->
    <section id="special-course" class="content-section">
      <div class="content-section__container">
        <ContentSectionHeader 
          englishTitle=""
          title="特設講座"
          class="fade-up"
        />
        
        <div class="results-content">
          <!-- 内容は後ほど追加予定 -->
          <p class="results-placeholder">当選結果の内容をこちらに掲載予定です。</p>
        </div>
      </div>
    </section>
  </main>
</BaseLayout>

<style lang="scss">
  @import "../../styles/index";

  .hero {
    position: relative;
    padding: rem(80) 0 rem(20);
    background: linear-gradient(to bottom, $background-secondary 0%, $background-primary 70%, $background-primary 100%);
    border-radius: 0 rem(120) 0 0;
    
    @include breakpoint-up(md) {
      padding: 0;
      border-radius: 0 rem(240) 0 0;
    }

    &::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      background-color: $brand-primary;
      z-index: -1;
    }

    &__container {
      margin: 0 auto;
      padding: 0 0 0 5%;
      overflow: hidden;
      @include breakpoint-up(xl) {
        padding: 0 0 0 rem(50);
      }
    }

    &__content {
      position: relative;
      padding: rem(40) 0 0;

      @include breakpoint-up(md) {
        padding: 0;
        display: flex;
        align-items: stretch;
        gap: rem(60);
      }
    }

    &__text {
      @include breakpoint-up(md) {
        flex: 1;
        padding: rem(120) 0 0;
      }
      @include breakpoint-up(xl) {
        padding: rem(160) 0 0;
      }
    }

    &__title {
      @include font-ja-2l(semibold);
      font-weight: bold;
      color: $text-primary;
      margin: 0 0 rem(8) 0;
      line-height: 1.4;

      @include breakpoint-up(lg) {
        @include font-ja-3l(semibold);
        margin-bottom: rem(12);
      }
    }

    &__subtitle {
      @include font-en-s(semibold);
      color: $text-secondary;
      margin: 0 0 rem(30) 0;
      font-weight: 500;
      letter-spacing: 0.05em;

      @include breakpoint-up(lg) {
        @include font-en-m(semibold);
        margin-bottom: 0;
      }
    }

    &__image {
      display: none;
      
      @include breakpoint-up(md) {
        display: block;
        flex: 0 0 auto;
        width: 45%;
        min-height: rem(100);
        background: transparent;
      }
      @include breakpoint-up(xl) {
        max-width: rem(600);
        min-height: rem(400);
      }

      img {
        display: none;
      }
    }
  }

  .breadcrumb {
    padding: rem(20) 0;
    background: $background-primary;
    @include breakpoint-up(lg) {
      padding: rem(50) 0 rem(20);
    }

    &__container {
      margin: 0 auto;
      padding: 0 0 0 5%;
      @include breakpoint-up(xl) {
        padding: 0 0 0 rem(50);
      }
    }

    &__list {
      display: flex;
      align-items: center;
      gap: rem(8);
      list-style: none;
      margin: 0;
      padding: 0;
      @include font-ja-3s;
    }

    &__item {
      display: flex;
      align-items: center;

      &:not(:last-child)::after {
        content: '>';
        margin-left: rem(8);
        color: $text-secondary;
      }

      a {
        @include font-ja-3s(semibold);
        color: $text-link;
        text-decoration: underline;

        &:hover {
          color: $text-link-hover;
          text-decoration: underline;
        }
      }

      &[aria-current="page"] {
        @include font-ja-3s;
        color: $text-primary;
        font-weight: 500;
      }
    }
  }

  .introduction {
    padding: rem(20) 0 rem(30);
    background: $background-primary;
    @include breakpoint-up(lg) {
      padding: rem(80) 0 rem(30);
    }

    &__container {
      margin: 0 auto;
      padding: 0 5%;
      @include breakpoint-up(xl) {
        padding: 0 rem(50);
      }
    }

    &__text {
      @include font-ja-s;
      color: $text-primary;
      line-height: 1.8;
      margin: 0;
      max-width: rem(1200);
    }
  }

  .page-nav {
    padding: rem(20) 0 0;
    background: $background-primary;

    &__container {
      margin: 0 auto;
      padding: 0 5%;
      @include breakpoint-up(xl) {
        padding: 0 rem(50);
      }
    }

    &__menu {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0;

      @include breakpoint-up(sm) {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      }
    }

    &__link {
      display: flex;
      align-items: center;
      gap: rem(5);
      color: $text-primary;
      text-decoration: none;
      transition: color 0.3s ease;
      padding: rem(6) rem(10);

      @include breakpoint-up(sm) {
        gap: rem(12);
        padding: rem(6) rem(20);
        border-right: 1px solid $border-secondary;
      }

      @include breakpoint-up(xl) {
        padding: rem(6) rem(30);
      }

      &:first-child {
        @include breakpoint-up(sm) {
          padding-left: 0;
        }
      }

      &:last-child {
        border-right: none;
      }

      &:hover {
        color: $brand-secondary;
        text-decoration: none;

        .page-nav__arrow {
          transform: translateY(rem(6)) rotate(45deg);
        }
      }
    }

    &__text {
      @include font-ja-s(semibold);
    }

    &__arrow {
      width: rem(9);
      height: rem(9);
      border-right: 2px solid currentColor;
      border-bottom: 2px solid currentColor;
      transform: rotate(45deg);
      transition: transform 0.3s ease;
      flex-shrink: 0;
      margin-right: rem(3);
    }
  }

  .content-section {
    padding: rem(80) 0 rem(120);
    background: $background-primary;
    @include breakpoint-up(xl) {
      padding: rem(90) 0 rem(160);
    }

    &:nth-child(even) {
      background: $background-secondary;
    }

    &__container {
      margin: 0 auto;
      padding: 0 5%;
      overflow: hidden;
      @include breakpoint-up(xl) {
        padding: 0 rem(50);
      }
    }

    &__header {
      position: relative;
      margin-bottom: rem(50);
      margin-right: -5%;
      overflow: hidden;
      @include breakpoint-up(xl) {
        margin-bottom: rem(70);
        margin-right: 0;
      }
    }

    &__title-wrapper {
      position: relative;
      display: flex;
      align-items: center;
      gap: rem(8);
      z-index: 2;
      margin-top: rem(40);
      
      @include breakpoint-up(lg) {
        margin-top: rem(80);
      }
    }

    &__icon {
      width: rem(24);
      height: rem(24);
      flex-shrink: 0;
      margin-top: rem(2);

      @include breakpoint-up(lg) {
        width: rem(36);
        height: rem(36);
        margin-top: rem(4);
      }
    }

    &__title {
      @include font-ja-l(semibold);
      color: $text-primary;
      margin: 0;
      line-height: 1.4;

      @include breakpoint-up(lg) {
        @include font-ja-2l(semibold);
      }
    }
  }

  .results-content {
    margin-top: rem(40);
    
    @include breakpoint-up(md) {
      margin-top: rem(60);
    }
  }

  .results-placeholder {
    @include font-ja-s;
    color: $text-secondary;
    text-align: center;
    padding: rem(60) rem(20);
    background: $background-secondary;
    border-radius: $radius-m;
    margin: 0;
  }
</style>

<script>
// スムーススクロール
document.addEventListener('DOMContentLoaded', function() {
  const navLinks = document.querySelectorAll('.page-nav__link');
  
  navLinks.forEach(link => {
    link.addEventListener('click', function(e: Event) {
      e.preventDefault();
      
      const target = e.currentTarget as HTMLAnchorElement;
      const href = target.getAttribute('href');
      const targetId = href?.substring(1);
      const targetElement = targetId ? document.getElementById(targetId) : null;
      
      if (targetElement) {
        targetElement.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
});

// スクロールアニメーション用のIntersection Observer
document.addEventListener('DOMContentLoaded', function() {
  const observerOptions = {
    threshold: 0.1, // 要素の10%が見えたら発火
    rootMargin: '0px 0px -50px 0px' // 下から50px余裕を持たせる
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
        // 一度表示されたら監視を停止（パフォーマンス向上）
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  // fade-upクラスを持つ全ての要素を監視対象に追加
  const fadeUpElements = document.querySelectorAll('.fade-up');
  fadeUpElements.forEach(element => {
    observer.observe(element);
  });
});
</script>