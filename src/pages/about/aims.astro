---
import BaseLayout from "../../layouts/BaseLayout.astro";
import HeroSection from "../../components/HeroSection.astro";
import Breadcrumb from "../../components/Breadcrumb.astro";  
import ContentSectionHeader from "../../components/ContentSectionHeader.astro";
import { Image } from "astro:assets";

const breadcrumbItems = [
  { href: "/", label: "ホーム" },
  { href: "/about", label: "むなかた子ども大学について" },
  { label: "ねらい・目的", current: true }
];
---

<BaseLayout title="ねらい・目的" description="むなかた子ども大学のねらい・目的について詳しくご紹介します。取組の背景や具体的な目標、期待される効果などを説明しています。">
  <main>
    <HeroSection 
      title="ねらい・目的"
      subtitle="Our Aims & Approach"
      imageSrc="/images/backgrounds/img_bg-hero_aims-01.webp"
      imageAlt="ねらい・目的"
    />

    <Breadcrumb items={breadcrumbItems} />

    <!-- Introduction Section -->
    <section class="introduction">
      <div class="introduction__container">
        <p class="introduction__text">
          むなかた子ども大学は、子どもたちが自身の可能性を広げたり新たな可能性を発見し、興味・関心を深堀りして「志」を育むための取組です。<br>
          教育関係者・企業・団体・市民・行政等が連携し、年間を通して「本物から学ぶ」「本物を体験する」機会を提供しています。
        </p>
      </div>
    </section>

    <!-- Navigation Links -->
    <section class="page-nav">
      <div class="page-nav__container">
        <nav class="page-nav__menu">
          <a href="#challenges" class="page-nav__link">
            <div class="page-nav__arrow"></div>
            <span class="page-nav__text">地域特性・社会課題</span>
          </a>
          <a href="#mission" class="page-nav__link">
            <div class="page-nav__arrow"></div>
            <span class="page-nav__text">使命・ビジョン</span>
          </a>
          <a href="#aims" class="page-nav__link">
            <div class="page-nav__arrow"></div>
            <span class="page-nav__text">ねらい</span>
          </a>
          <a href="#programs" class="page-nav__link">
            <div class="page-nav__arrow"></div>
            <span class="page-nav__text">具体的な取組</span>
          </a>
        </nav>
      </div>
    </section>

    <!-- 地域特性・社会課題 Section -->
    <section id="challenges" class="content-section">
      <div class="content-section__container">
        <ContentSectionHeader 
          englishTitle="Challenges in Munakata"
          title="地域特性・社会課題"
          class="fade-up"
        />
        
        <div class="content-section__intro">
          <p class="content-section__intro-text">
            宗像市の立地条件や急速に変化する社会環境により、子どもたちが望ましい職業観を構築することが難しくなっています。むなかた子ども大学では、社会が一丸となってこの課題に向き合い、子どもたちが "夢" や "志" を考えるきっかけをつくります。
          </p>
        </div>

        <div class="content-section__challenge-list">
          <div class="challenge-item fade-up">
            <div class="challenge-item__image">
              <Image 
                src="/images/content/img_aims_charange-01.webp" 
                alt="ベッドタウンの特性" 
                width={300}
                height={300}
                format="webp"
                quality={85}
                loading="lazy"
              />
            </div>
            <div class="challenge-item__content">
              <p class="challenge-item__text">
                市外通勤者が約6割のベッドタウン。<br>
                <mark class="challenge-item__highlight">子どもが多様な職業に触れる機会が都市部より少ない。</mark>
              </p>
            </div>
          </div>

          <div class="challenge-item fade-up fade-up--delay-1">
            <div class="challenge-item__image">
              <Image 
                src="/images/content/img_aims_charange-02.webp" 
                alt="社会環境の変化" 
                width={300}
                height={300}
                format="webp"
                quality={85}
                loading="lazy"
              />
            </div>
            <div class="challenge-item__content">
              <p class="challenge-item__text">
                社会環境の急速な変化（コロナ禍・働き方の多様化）で<mark class="challenge-item__highlight">職業体験や社会体験の機会が減少。</mark>
              </p>
            </div>
          </div>

          <div class="challenge-item fade-up fade-up--delay-2">
            <div class="challenge-item__image">
              <Image 
                src="/images/content/img_aims_charange-03.webp" 
                alt="学校現場の課題" 
                width={300}
                height={300}
                format="webp"
                quality={85}
                loading="lazy"
              />
            </div>
            <div class="challenge-item__content">
              <p class="challenge-item__text">
                学校現場は日々様々な課題に直面。<br>
                <mark class="challenge-item__highlight">学校現場の努力だけでは、失われた職業体験・社会体験の機会を取り戻すことは困難。</mark>
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 使命・ビジョン Section -->
    <section id="mission" class="content-section mission-vision-section">
      <div class="content-section__container">
        <ContentSectionHeader 
          englishTitle="Mission & Vision"
          title="使命・ビジョン"
          class="fade-up"
        />
        
        <div class="mission-vision-content">
          <!-- Mission Box -->
          <div class="mission-vision-box fade-up">
            <div class="mission-vision-box__image">
              <Image 
                src="/images/content/img_aims_mision-01.webp" 
                alt="Mission" 
                width={500}
                height={375}
                format="webp"
                quality={85}
                loading="lazy"
              />
            </div>
            <div class="mission-vision-box__content">
              <div class="mission-vision-box__text-wrapper">
                <h3 class="mission-vision-box__title mission-vision-box__title--right">Mission</h3>
                <p class="mission-vision-box__text">
                  子どもたちが 自分の可能性を広げたり新たな可能性を発見し、興味・関心を深堀りし「志」を育む ことを支援する。<br>
                  そのために教育関係者・企業・団体・市民・行政等が総がかりで「本物から学ぶ」「本物を体験する」機会を提供し、子どもたちのキャリアプランニング能力を育成する。
                </p>
              </div>
            </div>
          </div>

          <!-- Vision Box -->
          <div class="mission-vision-box mission-vision-box--reverse fade-up fade-up--delay-1">
            <div class="mission-vision-box__image">
              <Image 
                src="/images/content/img_aims_mision-02.webp" 
                alt="Vision" 
                width={500}
                height={375}
                format="webp"
                quality={85}
                loading="lazy"
              />
            </div>
            <div class="mission-vision-box__content">
              <div class="mission-vision-box__text-wrapper">
                <h3 class="mission-vision-box__title mission-vision-box__title--left">Vision</h3>
                <p class="mission-vision-box__text">
                  「宗像市に住むことで受けられる、充実したキャリア教育」として、子どもたちの主体的なキャリア形成の促進<br><br>
                  —— "ずっと住みたいまち宗像" の実現
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ねらい Section -->
    <section id="aims" class="content-section">
      <div class="content-section__container">
        <ContentSectionHeader 
          englishTitle="Educational Aims"
          title="ねらい"
          class="fade-up"
        />
        
        <div class="content-section__intro">
          <h3 class="content-section__intro-title">学びの4ステップ</h3>
          <p class="content-section__intro-text">
            「理解 → 体験 → 行動」へと段階的に深め、子どもたちが自ら描く"志"を具体的なアクションへつなげる成長モデルです。<br>
            自己理解から職業理解、啓発的経験を経て意思決定・実践へ――年間を通じた講座が各ステップを相互に補完し、発達段階に応じた主体的なキャリア形成を力強く後押しします。
          </p>
        </div>
        
        <div class="pyramid-container">
          <ol class="pyramid">
            <li class="pyramid-level">
              <div class="pyramid-level__content">
                <h4 class="pyramid-level__title">意志決定・方策の実行</h4>
                <p class="pyramid-level__text">キャリアプランの作成、目標設定、就職や進学等に向けた取組</p>
                <div class="pyramid-level__tags">
                  <!-- 1つ目：なし -->
                </div>
              </div>
            </li>
            <li class="pyramid-level">
              <div class="pyramid-level__content">
                <h4 class="pyramid-level__title">啓発的経験</h4>
                <p class="pyramid-level__text">「自己理解」「職業理解」に役立つ実際の体験による、将来イメージの具体化</p>
                <div class="pyramid-level__tags">
                  <span class="pyramid-level__tag pyramid-level__tag--main-campus">メインキャンパス</span>
                  <span class="pyramid-level__tag pyramid-level__tag--mku-day">むなかた<br class="xl-up-break">子ども大学の日</span>
                </div>
              </div>
            </li>
            <li class="pyramid-level">
              <div class="pyramid-level__content">
                <h4 class="pyramid-level__title">職業理解</h4>
                <p class="pyramid-level__text">社会や職業について、広く深く正しい情報を知る</p>
                <div class="pyramid-level__tags">
                  <span class="pyramid-level__tag pyramid-level__tag--main-campus">メインキャンパス</span>
                  <span class="pyramid-level__tag pyramid-level__tag--special-course">特設講座</span>
                  <span class="pyramid-level__tag pyramid-level__tag--mku-day">むなかた<br class="xl-up-break">子ども大学の日</span>
                </div>
              </div>
            </li>
            <li class="pyramid-level">
              <div class="pyramid-level__content">
                <h4 class="pyramid-level__title">自己理解</h4>
                <p class="pyramid-level__text">好きなことを見つける・適性を知る</p>
                <div class="pyramid-level__tags">
                  <span class="pyramid-level__tag pyramid-level__tag--summer-course">夏の課外授業</span>
                  <span class="pyramid-level__tag pyramid-level__tag--mku-day">むなかた<br class="xl-up-break">子ども大学の日</span>
                </div>
              </div>
            </li>
          </ol>
          
          <!-- lg以降の右側表示 -->
          <div class="pyramid-legend">
            <div class="pyramid-legend__item">
              <div class="pyramid-legend__line"></div>
              <div class="pyramid-legend__tags">
                <!-- 1つ目：なし -->
              </div>
            </div>
            <div class="pyramid-legend__item">
              <div class="pyramid-legend__line"></div>
              <div class="pyramid-legend__tags">
                <!-- 2つ目：矢印で表示 -->
              </div>
            </div>
            <div class="pyramid-legend__item">
              <div class="pyramid-legend__line"></div>
              <div class="pyramid-legend__tags">
                <!-- 3つ目：矢印で表示 -->
              </div>
            </div>
            <div class="pyramid-legend__item">
              <div class="pyramid-legend__line"></div>
              <div class="pyramid-legend__tags">
                <!-- 4つ目：矢印で表示 -->
              </div>
            </div>
            
            <!-- 縦向き矢印線（3本） -->
            <!-- ①1終点~3終点（左側） -->
            <div class="pyramid-legend__arrow pyramid-legend__arrow--left-1">
              <div class="pyramid-legend__arrow-line"></div>
              <div class="pyramid-legend__arrow-top"></div>
              <div class="pyramid-legend__arrow-bottom"></div>
              <div class="pyramid-legend__arrow-labels">
                <span class="pyramid-level__tag pyramid-level__tag--main-campus">メインキャンパス</span>
                <span class="pyramid-level__tag pyramid-level__tag--special-course">特設講座</span>
              </div>
            </div>
            
            <!-- ②3終点~4終点（左側） -->
            <div class="pyramid-legend__arrow pyramid-legend__arrow--left-2">
              <div class="pyramid-legend__arrow-line"></div>
              <div class="pyramid-legend__arrow-top"></div>
              <div class="pyramid-legend__arrow-bottom"></div>
              <div class="pyramid-legend__arrow-labels">
                <span class="pyramid-level__tag pyramid-level__tag--summer-course">夏の課外授業</span>
              </div>
            </div>
            
            <!-- ③1終点~4終点（右側中央） -->
            <div class="pyramid-legend__arrow pyramid-legend__arrow--right">
              <div class="pyramid-legend__arrow-line"></div>
              <div class="pyramid-legend__arrow-top"></div>
              <div class="pyramid-legend__arrow-bottom"></div>
              <div class="pyramid-legend__arrow-labels">
                <span class="pyramid-level__tag pyramid-level__tag--mku-day">むなかた<br class="xl-up-break">子ども大学の日</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 具体的な取組 Section -->
    <section id="programs" class="content-section programs-section">
      <div class="content-section__container">
        <ContentSectionHeader 
          englishTitle="Programs & Activities"
          title="具体的な取組"
          class="fade-up"
        />
        
        <div class="pillars-program-grid">
          <!-- メインキャンパス -->
          <a href="/course/main-campus" class="pillar-card pillar-card--main-campus fade-up">
            <div class="pillar-card__english">Main Campus</div>
            <div class="pillar-card__image">
              <Image 
                src="/images/content/img_course-menu-01.webp" 
                alt="メインキャンパス" 
                width={330}
                height={330}
                format="webp"
                quality={85}
                loading="lazy"
                class="pillar-card__img" 
              />
            </div>
            <div class="pillar-card__content">
              <h3 class="pillar-card__title">メインキャンパス</h3>
              <p class="pillar-card__description">
                市内在住の小・中学生が対象。<br>
                興味のある職業を1つ選び、1日をとおしてじっくり学ぶ、年に1度の職業体験イベント。
              </p>
              <ul class="pillar-card__points">
                <li class="pillar-card__point">年に1回実施</li>
                <li class="pillar-card__point">宗像市内で開催</li>
                <li class="pillar-card__point">職業体験</li>
                <li class="pillar-card__point">30前後の講座を同時開催</li>
                <li class="pillar-card__point">1つの講座を選択し、深く学ぶ（約4時間）</li>
              </ul>
              <div class="pillar-card__link">
                <span>VIEW MORE</span>
                <div class="pillar-card__arrow"></div>
              </div>
            </div>
          </a>
          
          <!-- 特設講座 -->
          <a href="/course/special-course" class="pillar-card pillar-card--special-course fade-up fade-up--delay-1">
            <div class="pillar-card__english">Special Course</div>
            <div class="pillar-card__image">
              <Image 
                src="/images/content/img_course-menu-02.webp" 
                alt="特設講座" 
                width={330}
                height={330}
                format="webp"
                quality={85}
                loading="lazy"
                class="pillar-card__img" 
              />
            </div>
            <div class="pillar-card__content">
              <h3 class="pillar-card__title">特設講座</h3>
              <p class="pillar-card__description">
                市内在住の小・中学生が対象。（一部コースでは未就学児や市外在住の児童生徒も対象）<br>
                月に1〜2描い、職業に関わる講座を中心に開催。市街にある企業の施設など、より現実に即した環境で実施することもある。
              </p>
              <ul class="pillar-card__points">
                <li class="pillar-card__point">月に1〜2回（不定期）</li>
                <li class="pillar-card__point">市内もしくは事業者施設等（市外含む）で開催</li>
                <li class="pillar-card__point">職業体験・体験活動（約2〜4時間）</li>
                <li class="pillar-card__point">不登校児童生徒の学びの場も提供</li>
              </ul>
              <div class="pillar-card__link">
                <span>VIEW MORE</span>
                <div class="pillar-card__arrow"></div>
              </div>
            </div>
          </a>
          
          <!-- むなかた子ども大学の日 -->
          <a href="/course/mku-day" class="pillar-card pillar-card--mku-day fade-up fade-up--delay-2">
            <div class="pillar-card__english">MKU Day</div>
            <div class="pillar-card__image">
              <Image 
                src="/images/content/img_course-menu-03.webp" 
                alt="むなかた子ども大学の日" 
                width={330}
                height={330}
                format="webp"
                quality={85}
                loading="lazy"
                class="pillar-card__img" 
              />
            </div>
            <div class="pillar-card__content">
              <h3 class="pillar-card__title">むなかた子ども大学の日</h3>
              <p class="pillar-card__description">
                宗像市内すべての小学校で開催。<br>
                学校が主体となり、キャリア教育の視点で、地域や地元企業等との繋がりを活かした学習活動を、各学園のねらいに合わせて実施。
              </p>
              <ul class="pillar-card__points">
                <li class="pillar-card__point">年に1回実施（学校毎に異なる）</li>
                <li class="pillar-card__point">地域や企業等との繋がりを活かした学習活動</li>
                <li class="pillar-card__point">保護者・地域の方も参観可</li>
              </ul>
              <div class="pillar-card__link">
                <span>VIEW MORE</span>
                <div class="pillar-card__arrow"></div>
              </div>
            </div>
          </a>
          
          <!-- 夏の課外授業 -->
          <a href="/course/summer-course" class="pillar-card pillar-card--summer-course fade-up fade-up--delay-3">
            <div class="pillar-card__english">Summer Course</div>
            <div class="pillar-card__image">
              <Image 
                src="/images/content/img_course-menu-04.webp" 
                alt="夏の課外授業" 
                width={330}
                height={330}
                format="webp"
                quality={85}
                loading="lazy"
                class="pillar-card__img" 
              />
            </div>
            <div class="pillar-card__content">
              <h3 class="pillar-card__title">夏の課外授業</h3>
              <p class="pillar-card__description">
                市外に住む子どもたちも参加可能な講座を夏休みに多数展開。<br>
                本市の魅力にたくさん触れてください。
              </p>
              <ul class="pillar-card__points">
                <li class="pillar-card__point">宗像市内で開催</li>
                <li class="pillar-card__point">市内外問わず小・中学生が参加可能</li>
                <li class="pillar-card__point">事業者・団体が主体</li>
                <li class="pillar-card__point">体験活動</li>
                <li class="pillar-card__point">約70の講座を夏季休暇期間中に順次展開</li>
              </ul>
              <div class="pillar-card__link">
                <span>VIEW MORE</span>
                <div class="pillar-card__arrow"></div>
              </div>
            </div>
          </a>
        </div>
      </div>
    </section>
  </main>
</BaseLayout>

<style lang="scss">
  @import "../../styles/index";

  .hero {
    position: relative;
    padding: rem(80) 0 rem(20);
    background: linear-gradient(to bottom, $background-secondary 0%, $background-primary 70%, $background-primary 100%);
    border-radius: 0 rem(120) 0 0;
    
    @include breakpoint-up(md) {
      padding: 0;
      border-radius: 0 rem(240) 0 0;
    }

    &::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      background-color: $brand-primary;
      z-index: -1;
    }

    &__container {
      margin: 0 auto;
      padding: 0 0 0 5%;
      overflow: hidden;
      @include breakpoint-up(xl) {
        padding: 0 0 0 rem(50);
      }
    }

    &__content {
      position: relative;
      padding: rem(40) 0 0;

      @include breakpoint-up(md) {
        padding: 0;
        display: flex;
        align-items: stretch;
        gap: rem(60);
      }
    }

    &__text {
      @include breakpoint-up(md) {
        flex: 1;
        padding: rem(120) 0 0;
      }
      @include breakpoint-up(xl) {
        padding: rem(160) 0 0;
      }
    }

    &__title {
      @include font-ja-2l(semibold);
      font-weight: bold;
      color: $text-primary;
      margin: 0 0 rem(8) 0;
      line-height: 1.4;

      @include breakpoint-up(lg) {
        @include font-ja-3l(semibold);
        margin-bottom: rem(12);
      }
    }

    &__subtitle {
      @include font-en-s(semibold);
      color: $text-secondary;
      margin: 0 0 rem(30) 0;
      font-weight: 500;
      letter-spacing: 0.05em;

      @include breakpoint-up(lg) {
        @include font-en-m(semibold);
        margin-bottom: 0;
      }
    }

    &__image {
      aspect-ratio: 16 / 9;
      width: 100%;
      @include breakpoint-up(md) {
        flex: 0 0 auto;
        width: 45%;
        min-height: rem(100);
      }
      @include breakpoint-up(xl) {
        max-width: rem(600);
        min-height: rem(400);
      }

      img,
      :global(img) {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: rem(8) 0 0 rem(8);
        @include breakpoint-up(md) {
          border-radius: 0 rem(240) 0 $radius-l;
        }
        @include breakpoint-up(xl) {
          border-radius: 0 rem(240) 0 $radius-2l;
        }
      }
    }
  }

  .breadcrumb {
    padding: rem(20) 0;
    background: $background-primary;
    @include breakpoint-up(lg) {
      padding: rem(50) 0 rem(20);
    }

    &__container {
      margin: 0 auto;
      padding: 0 0 0 5%;
      @include breakpoint-up(xl) {
        padding: 0 0 0 rem(50);
      }
    }

    &__list {
      display: flex;
      align-items: center;
      gap: rem(8);
      list-style: none;
      margin: 0;
      padding: 0;
      @include font-ja-3s;
    }

    &__item {
      display: flex;
      align-items: center;

      &:not(:last-child)::after {
        content: '>';
        margin-left: rem(8);
        color: $text-secondary;
      }

      a {
        @include font-ja-3s(semibold);
        color: $text-link;
        text-decoration: underline;

        &:hover {
          color: $text-link-hover;
          text-decoration: underline;
        }
      }

      &[aria-current="page"] {
        @include font-ja-3s;
        color: $text-primary;
        font-weight: 500;
      }
    }
  }

  .introduction {
    padding: rem(20) 0 rem(30);
    background: $background-primary;
    @include breakpoint-up(lg) {
      padding: rem(80) 0 rem(30);
    }

    &__container {
      margin: 0 auto;
      padding: 0 5%;
      @include breakpoint-up(xl) {
        padding: 0 rem(50);
      }
    }

    &__text {
      @include font-ja-s;
      color: $text-primary;
      line-height: 1.8;
      margin: 0;
      max-width: rem(1200);
    }
  }

  .page-nav {
    padding: rem(20) 0 0;
    background: $background-primary;

    &__container {
      margin: 0 auto;
      padding: 0 5%;
      @include breakpoint-up(xl) {
        padding: 0 rem(50);
      }
    }

    &__menu {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0;

      @include breakpoint-up(sm) {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      }
    }

    &__link {
      display: flex;
      align-items: center;
      gap: rem(5);
      color: $text-primary;
      text-decoration: none;
      transition: color 0.3s ease;
      padding: rem(6) rem(10);

      @include breakpoint-up(sm) {
        gap: rem(12);
        padding: rem(6) rem(20);
        border-right: 1px solid $border-secondary;
      }

      @include breakpoint-up(xl) {
        padding: rem(6) rem(30);
      }


      &:first-child {
        @include breakpoint-up(sm) {
          padding-left: 0;
        }
      }

      &:last-child {
        border-right: none;
      }

      &:hover {
        color: $brand-secondary;
        text-decoration: none;

        .page-nav__arrow {
          transform: translateY(rem(6)) rotate(45deg);
        }
      }
    }

    &__text {
      @include font-ja-s(semibold);
    }

    &__arrow {
      width: rem(9);
      height: rem(9);
      border-right: 2px solid currentColor;
      border-bottom: 2px solid currentColor;
      transform: rotate(45deg);
      transition: transform 0.3s ease;
      flex-shrink: 0;
      margin-right: rem(3);
    }
  }

  .content-section {
    padding: rem(80) 0 rem(120);
    background: $background-primary;
    @include breakpoint-up(xl) {
      padding: rem(90) 0 rem(160);
    }

    &:nth-child(even) {
      background: $background-secondary;
    }

    &__container {
      margin: 0 auto;
      padding: 0 5%;
      overflow: hidden;
      @include breakpoint-up(xl) {
        padding: 0 rem(50);
      }
    }
    
    // 地域特性・社会課題セクションのコンテナはxl以降でoverflow:hiddenを解除
    &#challenges &__container {
      @include breakpoint-up(xl) {
        overflow: visible;
      }
    }
    
    // 各セクションのpadding-bottomを小さく
    &#challenges {
      padding-bottom: rem(60);
      @include breakpoint-up(xl) {
        padding-bottom: rem(100);
      }
    }
    
    &#mission {
      padding-bottom: rem(60);
      @include breakpoint-up(xl) {
        padding-bottom: rem(100);
      }
    }
    
    &#aims {
      padding-bottom: rem(60);
      @include breakpoint-up(xl) {
        padding-bottom: rem(100);
      }
    }
    
    &#programs {
      padding-bottom: rem(60);
      @include breakpoint-up(xl) {
        padding-bottom: rem(100);
      }
    }

    &__header {
      position: relative;
      margin-bottom: rem(50);
      margin-right: -5%;
      overflow: hidden;
      @include breakpoint-up(xl) {
        margin-bottom: rem(70);
        margin-right: 0;
      }
    }

    &__english-title {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      @include font-en-2l(semibold);
      background: linear-gradient(90deg, rgba($background-accent, 0.3) 0%, rgba($background-accent, 0.7) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      opacity: 0.1;
      z-index: 1;
      pointer-events: none;
      white-space: nowrap;

      @include breakpoint-up(lg) {
        @include font-en-4l(semibold);
        top: rem(-10);
      }
    }

    &__title-wrapper {
      position: relative;
      display: flex;
      align-items: center;
      gap: rem(8);
      z-index: 2;
      margin-top: rem(40);
      
      @include breakpoint-up(lg) {
        margin-top: rem(80);
      }
    }

    &__icon {
      width: rem(24);
      height: rem(24);
      flex-shrink: 0;
      margin-top: rem(2);

      @include breakpoint-up(lg) {
        width: rem(36);
        height: rem(36);
        margin-top: rem(4);
      }
    }

    &__title {
      @include font-ja-l(semibold);
      color: $text-primary;
      margin: 0;
      line-height: 1.4;

      @include breakpoint-up(lg) {
        @include font-ja-2l(semibold);
      }
    }

    &__intro {
      margin-bottom: rem(60);
      max-width: rem(900);
      @include breakpoint-up(md) {
        width: 80%;
      }
    }

    &__intro-title {
      @include font-ja-m(semibold);
      color: $text-secondary;
      margin: 0 0 rem(20) 0;
      line-height: 1.4;
      @include breakpoint-up(lg) {
        @include font-ja-l(semibold);
      }
    }

    &__intro-text {
      @include font-ja-s;
      color: $text-primary;
      line-height: 1.8;
      margin: 0;
    }

    &__challenge-list {
      display: flex;
      flex-direction: column;
      gap: rem(70);
      padding-top: rem(20);
      @include breakpoint-up(md) {
        position: relative;
        padding-top: 0;
        gap: rem(40);
        width: 90%;
        margin-left: auto;
        
        &::after {
          content: '';
          position: absolute;
          top: rem(20);
          left: rem(-20);
          right: rem(20);
          bottom: rem(-20);
          border: 2px solid $border-primary;
          border-radius: $radius-m;
          z-index: 0;
          @include breakpoint-up(lg) {
            top: rem(30);
            left: rem(-30);
            right: rem(30);
            bottom: rem(-30);
          }
          @include breakpoint-up(xl) {
            top: rem(40);
            left: rem(-40);
            right: rem(40);
            bottom: rem(-40);
            border-radius: $radius-l;
          }
        }
      }
      @include breakpoint-up(xl) {
        width: 70%;
      }
    }
  }

  .challenge-item {
    display: flex;
    flex-direction: column;
    gap: rem(20);
    align-items: flex-start;
    background: $background-secondary;
    border-radius: $radius-m;
    z-index: 2;
    
    @include breakpoint-up(md) {
      flex-direction: row;
    }

    @include breakpoint-up(lg) {
      gap: rem(32);
      align-items: center;
    }

    @include breakpoint-up(lg) {
      border-radius: $radius-l;
    }

    &__image {
      flex-shrink: 0;
      width: 50%;
      margin-top: -10%;
      aspect-ratio: 1 / 1;
      align-self: center;
      
      @include breakpoint-up(md) {
        width: rem(200);
        margin-top: 0;
        align-self: flex-start;
      }
      
      @include breakpoint-up(xl) {
        width: rem(300);
      }
      
      img,
      :global(img) {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: $radius-m;
        @include breakpoint-up(lg) {
          border-radius: $radius-l;
        }
      }
    }

    &__content {
      flex: 1;
      padding: 0 rem(20) rem(20);
      
      @include breakpoint-up(md) {
        padding: rem(25);
      }
    }

    &__text {
      @include font-ja-m(semibold);
      color: $text-primary;
      margin: 0;
      line-height: 1.7;
    }

    &__highlight {
      background: linear-gradient(transparent 60%, $brand-sub-yellow 60%);
      color: inherit;
      padding: rem(2) 0;
    }
  }

  .mission-vision-section {
    background: $background-primary !important;
    padding-top: rem(20);
    @include breakpoint-up(lg) {
      padding-top: rem(60);
    }
  }

  .programs-section {
    background: $background-primary !important;
    
    .content-section__container {
      overflow: visible;
    }
  }

  .mission-vision-content {
    display: flex;
    flex-direction: column;
    gap: rem(60);
    
    @include breakpoint-up(lg) {
      gap: rem(80);
    }
  }

  .mission-vision-box {
    display: flex;
    flex-direction: column;
    
    @include breakpoint-up(md) {
      flex-direction: row;
      align-items: flex-end;
      gap: 0;
    }

    // Reverse layout for Vision box
    &--reverse {
      @include breakpoint-up(md) {
        flex-direction: row-reverse;
      }
      
      .mission-vision-box__image {
        align-self: flex-end;
        
        @include breakpoint-up(md) {
          align-self: flex-start;
          margin-left: 0;
          margin-right: calc(-5% - #{rem(20)});
        }
        
        @include breakpoint-up(xl) {
          margin-right: rem(-50);
        }
        
        img,
        :global(img) {
          @include breakpoint-up(md) {
            border-radius: $radius-m 0 0 $radius-m;
          }
          
          @include breakpoint-up(lg) {
            border-radius: $radius-l 0 0 $radius-l;
          }
        }
      }
      
      .mission-vision-box__content {
        align-self: flex-start;
        
        @include breakpoint-up(md) {
          align-self: auto;
          margin-left: 0;
          margin-right: -7%;
        }
      }
      
      .mission-vision-box__text {
        border-radius: 0 $radius-m $radius-m $radius-m;
        
        @include breakpoint-up(lg) {
          border-radius: $radius-l;
        }
      }
      
      // Vision画像のグラデーション（左下が白く）
      .mission-vision-box__image::after {
        @include breakpoint-down(sm) {
          background: linear-gradient(
            45deg,
            rgba(255, 255, 255, 0.8) 0%,
            transparent 60%
          );
        }
        
        @include breakpoint-up(md) {
          display: none;
        }
      }
    }

    &__image {
      flex-shrink: 0;
      width: 94%;
      aspect-ratio: 4 / 3;
      align-self: flex-start;
      position: relative;
      
      @include breakpoint-up(md) {
        width: 56%;
        margin-left: calc(-5% - #{rem(20)});
        padding-bottom: rem(40);
        box-sizing: content-box;
      }
      
      @include breakpoint-up(xl) {
        margin-left: rem(-50);
      }
      
      img,
      :global(img) {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: $radius-m;
        
        @include breakpoint-up(md) {
          border-radius: 0 $radius-m $radius-m 0;
        }
        
        @include breakpoint-up(lg) {
          border-radius: 0 $radius-l $radius-l 0;
        }
      }
      
      // 白いグラデーションオーバーレイ（Mission: 右下が白く）
      &::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          315deg,
          rgba(255, 255, 255, 0.8) 0%,
          transparent 60%
        );
        border-radius: $radius-m;
        pointer-events: none;
        
        @include breakpoint-up(md) {
          display: none;
        }
      }
    }

    &__content {
      flex: 1;
      width: 94%;
      align-self: flex-end;
      display: flex;
      flex-direction: column;
      
      @include breakpoint-up(md) {
        width: 49%;
        align-self: auto;
        margin-left: -7%;
      }
    }

    &__text-wrapper {
      position: relative;
      margin-top: rem(-80);
      @include breakpoint-up(md) {
        margin-top: 0;
      }
    }

    &__title {
      @include font-en-3l(semibold);
      color: $text-secondary;
      margin: 0;
      line-height: 1.2;
      z-index: 10;
      
      @include breakpoint-up(lg) {
        @include font-en-4l(semibold);
        top: rem(-12);
      }

      &--right {
        right: 0;
        text-align: right;
      }

      &--left {
        left: 0;
        text-align: left;
      }
    }

    &__text {
      @include font-ja-s(semibold);
      background: $brand-primary;
      color: $text-white;
      padding: rem(20);
      border-radius: $radius-m 0 $radius-m $radius-m;
      margin-top: rem(-15);
      line-height: 1.7;
      
      @include breakpoint-up(lg) {
        @include font-ja-m(semibold);
        padding: rem(30) rem(25) rem(50);
        margin-top: rem(-18);
      }
      @include breakpoint-up(xl) {
        padding: rem(70) rem(50) rem(90);
      }
    }
  }

  .pyramid {
    position: relative;
    padding: 0 0 rem(50);
    margin: 0 auto;
    width: 100%;
    max-width: calc(9em * 4);
    list-style: none;
    font-size: 14px;
    z-index: 0;
    
    @include breakpoint-up(md) {
      font-size: 18px;
      width: calc(8em * 4);
    }
    
    @include breakpoint-up(lg) {
      font-size: 20px;
      width: calc(7.5em * 4);
      margin: 0;
      flex-shrink: 0;
      padding: rem(30) 0 rem(50);
    }
    
    @include breakpoint-up(xl) {
      width: calc(9em * 4);
    }
  }

  .pyramid > li {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 6.5em;
    box-sizing: border-box;
    text-align: center;
    white-space: nowrap;
    position: relative;
    
    // アニメーション初期状態
    opacity: 0;
    transition: opacity 0.6s ease-out;
    
    @include breakpoint-up(lg) {
      height: 6em;
    }
    
    @include breakpoint-up(xl) {
      height: 7em;
      position: relative;
    }
    
    // アニメーション実行状態
    &.animate-in {
      opacity: 1;
    }
  }

  .pyramid > li:not(:last-child) {
    border-bottom: 8px solid $background-primary;
  }

  .pyramid > li::before {
    position: absolute;
    top: 0px;
    left: 50%;
    width: 100%;
    transform: translateX(-50%);
    background-position: top -2px left 1px, top -2px right 1px;
    background-size: 50% calc(6.5em * 4);
    background-repeat: no-repeat;
    content: "";
    
    // アニメーション初期状態
    opacity: 0;
    transition: opacity 0.6s ease-out;
    
    @include breakpoint-up(lg) {
      background-size: 50% calc(6em * 4);
    }
    
    @include breakpoint-up(xl) {
      background-size: 50% calc(7em * 4);
    }
  }
  
  .pyramid > li.animate-in::before {
    opacity: 1;
  }

  .pyramid > li:nth-of-type(1)::before {
    z-index: 4;
    height: calc(6.5em * 1);
    background-image:
      linear-gradient(to bottom right, transparent 50%, #A399CD 50%),
      linear-gradient(to bottom left, transparent 50%, #A399CD 50%);
    
    @include breakpoint-up(lg) {
      height: calc(6em * 1);
    }
    
    @include breakpoint-up(xl) {
      height: calc(7em * 1);
    }
  }

  .pyramid > li:nth-of-type(2)::before {
    z-index: 3;
    height: calc(6.5em * 2);
    top: calc(-6.5em * 1);
    background-image:
      linear-gradient(to bottom right, transparent 50%, #BAB3DA 50%),
      linear-gradient(to bottom left, transparent 50%, #BAB3DA 50%);
    
    @include breakpoint-up(lg) {
      height: calc(6em * 2);
      top: calc(-6em * 1);
    }
    
    @include breakpoint-up(xl) {
      height: calc(7em * 2);
      top: calc(-7em * 1);
    }
  }

  .pyramid > li:nth-of-type(3)::before {
    z-index: 2;
    height: calc(6.5em * 3);
    top: calc(-6.5em * 2);
    background-image:
      linear-gradient(to bottom right, transparent 50%, #D1CCE6 50%),
      linear-gradient(to bottom left, transparent 50%, #D1CCE6 50%);
    
    @include breakpoint-up(lg) {
      height: calc(6em * 3);
      top: calc(-6em * 2);
    }
    
    @include breakpoint-up(xl) {
      height: calc(7em * 3);
      top: calc(-7em * 2);
    }
  }

  .pyramid > li:nth-of-type(4)::before {
    z-index: 1;
    height: calc(6.5em * 4);
    top: calc(-6.5em * 3);
    background-image:
      linear-gradient(to bottom right, transparent 50%, #E6E4F1 50%),
      linear-gradient(to bottom left, transparent 50%, #E6E4F1 50%);
    
    @include breakpoint-up(lg) {
      height: calc(6em * 4);
      top: calc(-6em * 3);
    }
    
    @include breakpoint-up(xl) {
      height: calc(7em * 4);
      top: calc(-7em * 3);
    }
  }

  .pyramid-level__content {
    position: relative;
    z-index: 10;
    color: $text-secondary;
    text-align: center;
    padding: rem(8) rem(16);
    
    // アニメーション初期状態
    opacity: 0;
    transform: translateX(rem(-30));
    transition: all 0.6s ease-out;
    
    @include breakpoint-up(md) {
      padding: rem(12) rem(20);
    }
    
    @include breakpoint-up(xl) {
      position: absolute;
      left: rem(80);
      top: 50%;
      transform: translateY(-50%) translateX(rem(-30));
      text-align: left;
      padding: 0;
      width: calc(100% - #{rem(80)} - #{rem(20)});
    }
    
    // アニメーション実行状態
    .pyramid > li.animate-in & {
      opacity: 1;
      transform: translateX(0);
      
      @include breakpoint-up(xl) {
        transform: translateY(-50%) translateX(0);
      }
    }
  }

  .pyramid-level__title {
    @include font-ja-m(semibold);
    color: $text-secondary;
    margin: 0 0 rem(4) 0;
    line-height: 1.3;
    
    @include breakpoint-up(md) {
      @include font-ja-l(semibold);
      margin-bottom: rem(8);
    }
  }

  .pyramid-level__text {
    @include font-ja-3s;
    color: $text-secondary;
    margin: 0;
    line-height: 1.4;
    opacity: 0.9;
    
    @include breakpoint-up(md) {
      @include font-ja-s;
    }
  }

  .pyramid-level__tags {
    display: flex;
    flex-wrap: wrap;
    gap: rem(8);
    justify-content: center;
    margin-top: rem(6);
    
    @include breakpoint-up(lg) {
      display: none;
    }
  }

  .pyramid-level__tag {
    display: inline-block;
    padding: rem(4) rem(8);
    border-radius: $radius-xs;
    @include font-ja-3s(semibold);
    color: $text-white;
    font-weight: 600;
    width: auto;
    min-width: auto;
    
    @include breakpoint-up(xl) {
      @include font-ja-m(semibold);
      padding: rem(6) rem(12);
      border-radius: $radius-m;
    }
    
    &--main-campus {
      background-color: $brand-secondary;
    }
    
    &--special-course {
      background-color: $brand-turquoise;
    }
    
    &--mku-day {
      background-color: $brand-purple;
    }
    
    &--summer-course {
      background-color: $brand-pink;
    }
  }

  .pyramid-container {
    @include breakpoint-up(lg) {
      display: flex;
      align-items: flex-start;
      gap: rem(5);
    }
    @include breakpoint-up(xl) {
      max-width: rem(1400);
      margin: 0 auto;
    }
  }

  .pyramid-legend {
    display: none;
    
    @include breakpoint-up(lg) {
      display: flex;
      flex-direction: column;
      flex: 1;
      position: relative;
      margin-top: rem(80);
      
      // アニメーション初期状態
      opacity: 0;
      transform: translateX(rem(30));
      transition: all 0.6s ease-out;
      
      // アニメーション実行状態
      &.animate-in {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    &__item {
      display: flex;
      align-items: flex-end;
      height: rem(120);
      padding-bottom: rem(60);
      box-sizing: border-box;
      @include breakpoint-up(xl) {
        height: rem(140);
      }
      &:first-child {
        height: rem(130);
        @include breakpoint-up(xl) {
          height: rem(150);
        }
      }
      
      &:last-child {
        margin-bottom: 0;
      }
    }
    
    &__line {
      width: 100%;
      height: 1px;
      background-color: $border-secondary;
      margin-right: rem(16);
    }
    
    &__tags {
      display: flex;
      flex-wrap: wrap;
      gap: rem(8);
    }
    
    &__arrow {
      position: absolute;
      
      // 共通のスタイル
      &-line {
        width: 2px;
        height: 100%;
        background-color: #bbbbbb;
        position: relative;
        margin: 0 auto;
        @include breakpoint-up(xl) {
          width: 4px;
        }
      }
      
      &-top {
        position: absolute;
        top: rem(-4);
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: rem(6) solid transparent;
        border-right: rem(6) solid transparent;
        border-bottom: rem(8) solid #bbbbbb;
        @include breakpoint-up(xl) {
          border-left: rem(12) solid transparent;
          border-right: rem(12) solid transparent;
          border-bottom: rem(24) solid #bbbbbb;
        }
      }
      
      &-bottom {
        position: absolute;
        bottom: rem(-4);
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: rem(6) solid transparent;
        border-right: rem(6) solid transparent;
        border-top: rem(8) solid #bbbbbb;
        @include breakpoint-up(xl) {
          border-left: rem(12) solid transparent;
          border-right: rem(12) solid transparent;
          border-top: rem(24) solid #bbbbbb;
        }
      }
      
      &-labels {
        position: absolute;
        top: 50%;
        left: rem(10);
        transform: translateY(-50%);
        display: flex;
        flex-direction: column;
        gap: rem(4);
        align-items: flex-start;
        @include breakpoint-up(xl) {
          left: rem(20);
          gap: rem(8);
        }
        
        .pyramid-level__tag {
          white-space: nowrap;
          flex-shrink: 0;
        }
      }
      
      // ①1終点~3終点（左側）
      &--left-1 {
        left: rem(20);
        top: rem(74);
        height: rem(232); // 2つのli分（2つ目と3つ目）
        
        @include breakpoint-up(xl) {
          top: rem(94); // 7em * 20px + 4px
          height: rem(272); // 7em * 20px * 2 - 8px
        }
        
      }
      
      // ②3終点~4終点（左側）
      &--left-2 {
        left: rem(20);
        top: rem(314); // 3つ目の下端から
        height: rem(112); // 1つのli分（4つ目）
        
        @include breakpoint-up(xl) {
          top: rem(374); // 7em * 20px * 3 + 4px
          height: rem(132); // 7em * 20px - 8px
        }
      }
      
      // ③1終点~4終点（右側中央）
      &--right {
        right: 45%;
        transform: translateX(50%);
        top: rem(74);
        height: calc(rem(360) - rem(8));
        
        @include breakpoint-up(xl) {
          top: rem(94); // 7em * 20px + 4px
          height: rem(412); // 7em * 20px * 3 - 8px
        }
      }
    }
  }

  // xl未満でbrを非表示
  .xl-up-break {
    display: none !important;
  }
  
  // xl以降でbrを表示
  @include breakpoint-up(xl) {
    .xl-up-break {
      display: inline !important;
    }
  }

  .pillars-program-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: rem(32);
    position: relative;
    z-index: 1;
    padding-bottom: rem(20); // ボックスシャドウのための余白
    
    @include breakpoint-up(lg) {
      gap: rem(48);
      justify-items: center;
    }
    
    @include breakpoint-up(xl) {
      gap: rem(48);
      max-width: rem(1200);
      margin: 0 auto;
      padding-bottom: rem(32); // ボックスシャドウのための余白
    }
  }

  .pillar-card {
    background: $background-primary;
    border-radius: 0 rem(32) rem(32) rem(32);
    padding: rem(15) rem(15) rem(50);
    text-align: center;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    display: block;
    text-decoration: none;
    color: inherit;
    
    @include breakpoint-up(md) {
      width: 80%;
      margin: 0 auto;
    }
    
    @include breakpoint-up(lg) {
      display: flex;
      flex-direction: row-reverse;
      align-items: center;
      text-align: left;
      border-radius: rem(16) rem(160) rem(160) 0;
      padding: rem(10) rem(10) rem(10) rem(30);
      width: auto;
      margin: 0;
    }
    @include breakpoint-up(xl) {
      border-radius: rem(16) rem(175) rem(175) 0;
      max-width: rem(1200);
    }
    
    // fade-upアニメーションが完了した後にhoverエフェクトを有効にする
    &:not(.fade-up):hover,
    &.fade-up.is-visible:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
      text-decoration: none;
      
      .pillar-card__link {
        transform: translateX(rem(8));
        
        .pillar-card__arrow {
          transform: translateX(rem(4));
        }
      }
    }
    
    &__english {
      position: absolute;
      top: rem(-4);
      left: 0;
      line-height: 1;
      @include font-en-l(semibold);
      color: $text-tertiary;
      text-transform: uppercase;
      letter-spacing: 1px;
      
      @include breakpoint-up(lg) {
        @include font-en-2l(semibold);
        top: auto;
        bottom: rem(-3);
        left: rem(-3);
        z-index: 0;
      }
    }
    
    &__image {
      width: 70%;
      aspect-ratio: 1;
      margin: 0 auto rem(16);
      flex-shrink: 0;
      
      @include breakpoint-up(sm) {
        width: 40%;
        margin: rem(16) auto;
      }
      @include breakpoint-up(lg) {
        width: rem(300);
        height: rem(300);
        margin: 0 0 0 rem(32);
      }
      @include breakpoint-up(xl) {
        width: rem(330);
        height: rem(330);
      }
    }
    
    &__img,
    :global(.pillar-card__img) {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
    }
    
    // 各カードの背景色とテキストカラー
    &--main-campus {
      background-color: $brand-sub-yellow-low;
      
      .pillar-card__english {
        color: $brand-sub-yellow;
      }
    }
    &--special-course {
      background-color: $brand-sub-turquoise-low;
      
      .pillar-card__english {
        color: $brand-sub-turquoise;
      }
    }
    &--mku-day {
      background-color: $brand-sub-purple-low;
      
      .pillar-card__english {
        color: $brand-sub-purple;
      }
    }
    &--summer-course {
      background-color: $brand-sub-pink-low;
      
      .pillar-card__english {
        color: $brand-sub-pink;
      }
    }
    
    &__content {
      text-align: center;
      
      @include breakpoint-up(lg) {
        text-align: left;
        flex: 1;
        position: relative;
        z-index: 1;
      }
    }
    
    &__title {
      @include font-ja-m(semibold);
      color: $text-primary;
      margin-bottom: rem(12);
      
      @include breakpoint-up(lg) {
        @include font-ja-l(semibold);
        margin-bottom: rem(16);
      }
    }
    
    &__description {
      @include font-ja-s;
      text-align: left;
      color: $text-primary;
      line-height: 1.6;
      margin-bottom: rem(16);
      
      @include breakpoint-up(lg) {
      }
    }
    
    &__link {
      display: inline-flex;
      align-items: center;
      gap: rem(8);
      color: $text-primary;
      text-decoration: none;
      transition: all 0.3s ease;
      
      // lg未満: absolute positioning で右下に配置
      @include breakpoint-down(lg) {
        position: absolute;
        bottom: rem(15);
        right: rem(15);
      }
      
      // lg以降: static positioning で左揃え
      @include breakpoint-up(lg) {
        position: static;
        align-self: flex-start;
      }
      
      span {
        @include font-en-2s(semibold);
      }
    }
    
    &__arrow {
      width: rem(24);
      height: rem(24);
      background-color: $background-secondary;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      
      &::after {
        content: '';
        width: rem(8);
        height: rem(8);
        border-right: 2px solid $text-white;
        border-bottom: 2px solid $text-white;
        transform: translateX(rem(-1)) rotate(-45deg);
      }
      
      @include breakpoint-up(md) {
        width: rem(28);
        height: rem(28);
        
        &::after {
          width: rem(10);
          height: rem(10);
          transform: translateX(rem(-2)) rotate(-45deg);
        }
      }
    }
    
    // カード種別ごとの矢印円の色設定
    &--main-campus &__arrow {
      background-color: $brand-secondary;
    }
    &--special-course &__arrow {
      background-color: $brand-turquoise;
    }
    &--mku-day &__arrow {
      background-color: $brand-purple;
    }
    &--summer-course &__arrow {
      background-color: $brand-pink;
    }
    
    &__points {
      margin: 0 0 rem(16) 0;
      padding: rem(10);
      background: rgba($background-primary, 0.3);
      border-radius: rem(8);
      list-style: none;
      
      display: flex;
      flex-wrap: wrap;
      gap: rem(8) rem(16);
    }
    
    &__point {
      @include font-ja-2s(semibold);
      color: $text-primary;
      position: relative;
      
      &::before {
        content: '・';
        margin-right: rem(4);
      }
    }
  }

</style>

<script>
  // スムーススクロール
  document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.page-nav__link');
    
    navLinks.forEach(link => {
      link.addEventListener('click', function(e: Event) {
        e.preventDefault();
        
        const target = e.currentTarget as HTMLAnchorElement;
        const href = target.getAttribute('href');
        const targetId = href?.substring(1);
        const targetElement = targetId ? document.getElementById(targetId) : null;
        
        if (targetElement) {
          targetElement.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  });

  // ピラミッドアニメーション
  document.addEventListener('DOMContentLoaded', function() {
    const pyramidLevels = document.querySelectorAll('.pyramid > li');
    const pyramidLegend = document.querySelector('.pyramid-legend');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          // ピラミッドレベル（li）を0.2s間隔で順次表示
          pyramidLevels.forEach((level, index) => {
            setTimeout(() => {
              level.classList.add('animate-in');
            }, index * 200);
          });
          
          // レジェンドを4段目の0.2s後に表示
          if (pyramidLegend) {
            setTimeout(() => {
              pyramidLegend.classList.add('animate-in');
            }, (pyramidLevels.length - 1) * 200 + 200);
          }
          
          // 一度アニメーションしたら監視を停止
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.3 // 30%表示されたらトリガー
    });
    
    // ピラミッドコンテナを監視
    const pyramidContainer = document.querySelector('.pyramid-container');
    if (pyramidContainer) {
      observer.observe(pyramidContainer);
    }
  });

  // スクロールアニメーション用のIntersection Observer
  const observerOptions = {
    threshold: 0.1, // 要素の10%が見えたら発火
    rootMargin: '0px 0px -50px 0px' // 下から50px余裕を持たせる
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
        // 一度表示されたら監視を停止（パフォーマンス向上）
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  // fade-upクラスを持つ全ての要素を監視対象に追加
  const fadeUpElements = document.querySelectorAll('.fade-up');
  fadeUpElements.forEach(element => {
    observer.observe(element);
  });
</script>